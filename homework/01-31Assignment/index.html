<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <!--Loads the D3.js library v7-->
    <script src="https://d3js.org/d3.v7.min.js"></script>

	
</head>

<body>

<p>A JavaScript function that uses enter/update/exit elements to draw and control an animation<br>
   that involves SVG shapes, with animation driven according to a selected data array.</p>

   <!-- <div>
  	<svg width="760" height="140">

	<g transform="translate(70, 70)">
    <circle/>
    <circle cx="120" />
    <circle cx="240" />
    <circle cx="360" />
    <circle cx="480" />
  	</g>
	</svg>
    </div> -->

	<script>
	function getData() {
		let data = [];
		let numItems = Math.ceil(Math.random() * 5);
	
		for(let i=0; i<numItems; i++) {
			data.push(40);
		}
	
		return data;
	}
	
	function update(data) {
		d3.select('.chart')
			.selectAll('circle')
			.data(data)
			.join(
				function(enter) {
					return enter.append('circle')
						.style('opacity', 0.25);
				},
				function(update) {
					return update.style('opacity', 1);
				}
			)
			.attr('cx', function(d, i) {
				return i * 100;
			})
			.attr('cy', 50)
			.attr('r', function(d) {
				return 0.5 * d;
			})
			.style('fill', 'orange');
	}
	
	function updateAll() {
		let myData = getData();
		console.log("myData", myData);
		update(myData);
	}
	
	updateAll();
	
	d3.select("button")
		.on("click", updateAll);
	</script>

	<div>
		<svg width="600" height="100">
		  <g class="chart">
		  </g>
		</svg>
	</div>
	  <button>Update</button>
	  
    
</body>	
</html>